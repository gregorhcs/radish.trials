#
# quest structure subsegment: quest_hook
# 
# (version: 30, saved: 2022-05-03 19:45:16)
#
---
structure:
  segments:
    quest_hook:
      blocks:
        in:
          ".editor": [ -218.0, 242.0 ]
          next:
            - waituntil.approached_merchant
            - waituntil.approached_demons
        
        subsegment.demons_glossary_no1:
          ".editor":
            pos: [ 1332.0, 232.0 ]
            in: [ In ]
            out: [ Out ]
          segment: demons_glossary1
          next:
            - waituntil.met_merchant
        
        scene.s1_queststart_merchant:
          ".editor":
            pos: [ 351.0, 143.0 ]
            in: [ Input ]
            out: [ Output ]
          scene: test_demons.yml
          placement: novigrad/sp_test_demons
          interruptable: true
          _fadein: false
          next.Output:
            - journal.qjournal_found_merchant: Activate
        
        scene.s2_demons:
          ".editor":
            pos: [ 1199.0, 233.0 ]
            in: [ Input ]
            out: [ Output ]
          scene: test_demons.yml
          placement: novigrad/sp_test_demons
          interruptable: true
          _fadein: false
          next.Output:
            - subsegment.demons_glossary_no1
        
        waituntil.approached_demons:
          entered: [ novigrad/aproachdemons, PLAYER ]
          ".editor":
            pos: [ 628.0, 238.0 ]
            in: [ In ]
            out: [ Out ]
          next:
            - waituntil.not_started_with_merchant
            - objective.investigate_mansion: Success
            - scene.s2_demons: Input
        
        waituntil.approached_merchant:
          entered: [ novigrad/entermerchantarea, PLAYER ]
          ".editor":
            pos: [ -80.0, 146.0 ]
            in: [ In ]
            out: [ Out ]
          next:
            - waituntil.not_started_with_demons
        
        waituntil.met_merchant:
          ".editor":
            pos: [ 1465.0, 231.0 ]
            hint: named
            in: [ In ]
            out: [ "false", "true" ]
          conditions:
            "true":
              factdb: [ DMNQ_started_with, "=", 1 ]
            "false":
              factdb: [ DMNQ_started_with, "=", 2 ]
          next.false:
            - objective.getamulat_merchant_unknown: Activate
          next.true:
            - objective.getamulat_merchant_known: Activate
        
        waituntil.not_started_with_demons:
          ".editor":
            pos: [ 87.0, 145.0 ]
            hint: named
            in: [ In ]
            out: [ "true" ]
          "true":
            factdb: [ DMNQ_started_with, "=", 0 ]
          next.true:
            - addfact.fact_started_with_merchant
        
        waituntil.not_started_with_merchant:
          ".editor":
            pos: [ 765.0, 341.0 ]
            hint: named
            in: [ In ]
            out: [ "true" ]
          "true":
            factdb: [ DMNQ_started_with, "=", 0 ]
          next.true:
            - addfact.fact_started_with_demons
        
        journal.qjournal_found_demons:
          ".editor": [ 1032.0, 349.0 ]
          entry: quests/trial8/0_start_demons
          notify: true
          next: ".done"
        
        journal.qjournal_found_merchant:
          ".editor": [ 483.0, 144.0 ]
          entry: quests/trial8/0_start_merchant
          notify: true
          next:
            - waituntil.approached_demons
            - objective.investigate_mansion: Activate
        
        objective.bepeaceful_merchant_known:
          ".editor": [ 1719.0, 286.0 ]
          objective: trial8/get_amulet/use_force_merchant_known
          notify: true
          track: false
          next:
            - out
        
        objective.bepeaceful_merchant_unknown:
          ".editor": [ 1719.0, 185.0 ]
          objective: trial8/get_amulet/use_force_merchant_unknown
          notify: true
          track: false
          next:
            - out
        
        objective.getamulat_merchant_known:
          ".editor": [ 1601.0, 283.0 ]
          objective: trial8/get_amulet/get_amulet_merchant_known
          notify: true
          track: false
          next:
            - objective.bepeaceful_merchant_known: Activate
        
        objective.getamulat_merchant_unknown:
          ".editor": [ 1605.0, 186.0 ]
          objective: trial8/get_amulet/get_amulet_merchant_unknown
          notify: true
          track: false
          next:
            - objective.bepeaceful_merchant_unknown: Activate
        
        objective.investigate_mansion:
          ".editor": [ 746.0, 154.0 ]
          objective: trial8/task_merchant/investigate_mansion_front
          notify: true
          track: true
          next: ".done"
        
        addfact.fact_started_with_demons:
          ".editor": [ 896.0, 348.0 ]
          value: [ DMNQ_started_with, 2 ]
          next:
            - journal.qjournal_found_demons: Activate
        
        addfact.fact_started_with_merchant:
          ".editor": [ 202.0, 144.0 ]
          value: [ DMNQ_started_with, 1 ]
          next:
            - scene.s1_queststart_merchant: Input
        
        out:
          ".editor": [ 1854.0, 230.0 ]
          next: ".done"
        
