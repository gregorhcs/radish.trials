#
# quest structure subsegment: quest_hook
# 
# (version: 22, saved: 2022-05-02 22:39:14)
#
---
structure:
  segments:
    quest_hook:
      blocks:
        in:
          ".editor": [ -218.0, 242.0 ]
          next:
            - waituntil.approached_merchant
            - waituntil.approached_demons
        
        scene.s1_queststart_merchant:
          ".editor":
            pos: [ 351.0, 143.0 ]
            in: [ Input ]
            out: [ Output ]
          scene: test_demons.yml
          placement: novigrad/sp_test_demons
          interruptable: true
          _fadein: false
          next.Output:
            - journal.journal_found_merchant: Activate
        
        scene.s2_demons:
          ".editor":
            pos: [ 1142.0, 237.0 ]
            in: [ Input ]
            out: [ Output ]
          scene: test_demons.yml
          placement: novigrad/sp_test_demons
          interruptable: true
          _fadein: false
          next.Output:
            - waituntil.chosen_violence
        
        waituntil.approached_demons:
          entered: [ novigrad/aproachdemons, PLAYER ]
          ".editor":
            pos: [ 628.0, 238.0 ]
            in: [ In ]
            out: [ Out ]
          next:
            - scene.s2_demons: Input
            - waituntil.not_started_with_merchant
        
        waituntil.approached_merchant:
          entered: [ novigrad/entermerchantarea, PLAYER ]
          ".editor":
            pos: [ -80.0, 146.0 ]
            in: [ In ]
            out: [ Out ]
          next:
            - waituntil.not_started_with_demons
        
        waituntil.chosen_violence:
          ".editor":
            pos: [ 1273.0, 236.0 ]
            hint: named
            in: [ In ]
            out: [ "false", "true" ]
          conditions:
            "true":
              factdb: [ DMNS_violence_chosen, ">", 0 ]
            "false":
              factdb: [ DMNS_violence_chosen, "=", 0 ]
          next: ".done"
        
        waituntil.not_started_with_demons:
          ".editor":
            pos: [ 87.0, 145.0 ]
            hint: named
            in: [ In ]
            out: [ "true" ]
          conditions:
            "true":
              factdb: [ DMNS_started_with, "=", 0 ]
          next.true:
            - addfact.fact_started_with_merchant
        
        waituntil.not_started_with_merchant:
          ".editor":
            pos: [ 769.0, 302.0 ]
            hint: named
            in: [ In ]
            out: [ "true" ]
          conditions:
            "true":
              factdb: [ DMNS_started_with, "=", 0 ]
          next.true:
            - addfact.fact_started_with_demons
        
        journal.journal_found_demons:
          ".editor": [ 1017.0, 301.0 ]
          entry: quests/trial8/0_start_demons
          notify: true
          next: ".done"
        
        journal.journal_found_merchant:
          ".editor": [ 483.0, 144.0 ]
          entry: quests/trial8/0_start_merchant
          notify: true
          next:
            - waituntil.approached_demons
        
        addfact.fact_started_with_demons:
          ".editor": [ 894.0, 303.0 ]
          value: [ DMNS_started_with, 2 ]
          next:
            - journal.journal_found_demons: Activate
        
        addfact.fact_started_with_merchant:
          ".editor": [ 202.0, 144.0 ]
          value: [ DMNS_started_with, 1 ]
          next:
            - scene.s1_queststart_merchant: Input
        
        out:
          ".editor": [ 1539.0, 236.0 ]
          next: ".done"
        
