#
# quest structure subsegment: fetching_the_amulet
# 
# (version: 51, saved: 2022-05-14 22:45:27)
#
---
structure:
  segments:
    fetching_the_amulet:
      blocks:
        in:
          ".editor": [ 100.0, 300.0 ]
          next:
            - waituntil.approached_merchant
        
        scene.s3_amulet_from_merchant:
          ".editor":
            pos: [ 500.0, 300.0 ]
            in: [ Input ]
            out: [ Output, fight ]
          scene: s3_amulet_from_merchant.yml
          placement: novigrad/sp_merchant1
          interruptable: true
          _fadein: false
          next.Output:
            - interaction.s4_demons_2nd_task: Input
          next.fight:
            - script.sword_fight
        
        interaction.s4_demons_2nd_task:
          ".editor":
            pos: [ 954.0, 245.0 ]
            in: [ Input ]
            out: [ Output ]
          scene: s4_demons_2nd_task.yml
          placement: novigrad/sp_demons
          interruptable: true
          actor: [ dmnq_black_cat, dmnq_black_dog ]
          next.Output:
            - out
        
        waituntil.2XP_requested:
          factdb: [ dmnq_2xp, ">=", 1 ]
          ".editor":
            pos: [ 519.0, -33.0 ]
            in: [ In ]
            out: [ Out ]
          next:
            - script.reward_2XP_
        
        waituntil.5XP_requested:
          factdb: [ dmnq_5xp, ">=", 1 ]
          ".editor":
            pos: [ 510.0, 33.0 ]
            in: [ In ]
            out: [ Out ]
          next:
            - script.reward_5XP
        
        waituntil.approached_merchant:
          entered: [ novigrad/entermerchantarea, PLAYER ]
          ".editor":
            pos: [ 300.0, 300.0 ]
            in: [ In ]
            out: [ Out ]
          next:
            - scene.s3_amulet_from_merchant: Input
            - waituntil.5XP_requested
            - waituntil.2XP_requested
        
        script.2XP_fact_reset:
          ".editor":
            pos: [ 802.0, -38.0 ]
            in: [ In ]
            out: [ Out ]
          function: ResetFactQuest
          parameter:
            - factId: cname_dmnq_2xp
          next: ".done"
        
        script.5XP_fact_reset:
          ".editor":
            pos: [ 802.0, 33.0 ]
            in: [ In ]
            out: [ Out ]
          function: ResetFactQuest
          parameter:
            - factID: cname_dmnq_5xp
          next: ".done"
        
        script.reward_2XP_:
          ".editor":
            pos: [ 649.0, -35.0 ]
            in: [ In ]
            out: [ Out ]
          function: DMNQ_GiveRewardToPlayer
          parameter:
            - rewardName: cname_def_reward_2xp
          next:
            - script.2XP_fact_reset
        
        script.reward_5XP:
          ".editor":
            pos: [ 651.74609375, 34.8889083862 ]
            in: [ In ]
            out: [ Out ]
          function: DMNQ_GiveRewardToPlayer
          parameter:
            - rewardName: cname_def_reward_5xp
          next:
            - script.5XP_fact_reset
        
        script.sword_fight:
          ".editor":
            pos: [ 627.0, 428.0 ]
            in: [ In ]
            out: [ Out ]
          function: radLog
          parameter:
            - logChannel: cname_TRIAL8
            - msg: sword fight
          next:
            - interaction.s4_demons_2nd_task: Input
        
        out:
          ".editor": [ 1116.0, 248.0 ]
          next: ".done"
        
